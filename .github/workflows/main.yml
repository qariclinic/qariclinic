name: Flutter CI

on:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Setup Flutter
      uses: subosito/flutter-action@v2
      with:
        flutter-version: '3.13.0'
        
    - name: Create main.dart if missing
      run: |
        if [ ! -f "lib/main.dart" ]; then
          echo "Creating lib/main.dart..."
          mkdir -p lib
          cat > lib/main.dart << 'DART'
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Admin Dashboard',
      home: Scaffold(
        appBar: AppBar(title: Text('Admin Dashboard')),
        body: Center(child: Text('Welcome to Admin Dashboard')),
      ),
    );
  }
}
DART
          echo "âœ… main.dart created successfully"
        else
          echo "âœ… main.dart already exists"
        fi
        
    - name: Install dependencies
      run: flutter pub get
      
    - name: Build web
      run: flutter build web --release
      
    - name: Upload web build
      uses: actions/upload-artifact@v4
      with:
        name: web-build
        path: build/web/
